{% extends 'quiz/base.html' %}

{% block title %}Edit Question - {{ question.quiz.title }}{% endblock %}

{% block extra_css %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800&display=swap');
    
    * {
        font-family: 'Inter', sans-serif;
        box-sizing: border-box;
    }
    
    body {
        background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
        margin: 0;
        padding: 0;
    }
    
    h1, h2, h3, h4, h5, h6 {
        font-family: 'Playfair Display', serif;
    }
    
    /* Animated gradient background */
    .animated-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
        background-size: 400% 400%;
        animation: gradientShift 20s ease infinite;
    }
    
    @keyframes gradientShift {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    
    /* Floating bubbles */
    .bubble {
        position: fixed;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
        z-index: -1;
        animation: float 15s infinite ease-in-out;
    }
    
    @keyframes float {
        0% {
            transform: translate(0, 0) scale(1);
        }
        25% {
            transform: translate(20px, 40px) scale(1.1);
        }
        50% {
            transform: translate(40px, 20px) scale(0.9);
        }
        75% {
            transform: translate(20px, -40px) scale(1.2);
        }
        100% {
            transform: translate(0, 0) scale(1);
        }
    }
    
    /* Page title with neon effect */
    h2 {
        animation: titleReveal 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
                   neonGlow 3s ease-in-out infinite alternate;
        color: #fff;
        font-weight: 800;
        letter-spacing: 3px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        position: relative;
        text-align: center;
        margin-bottom: 40px;
        font-size: 2.8rem;
        opacity: 0;
        transform: translateY(-30px) rotateX(90deg);
    }
    
    @keyframes titleReveal {
        0% {
            opacity: 0;
            transform: translateY(-30px) rotateX(90deg);
        }
        50% {
            opacity: 0.7;
            transform: translateY(10px) rotateX(30deg);
        }
        100% {
            opacity: 1;
            transform: translateY(0) rotateX(0deg);
        }
    }
    
    @keyframes neonGlow {
        0% {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        100% {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
                         0 0 30px rgba(100, 200, 255, 0.6),
                         0 0 40px rgba(100, 200, 255, 0.4);
        }
    }
    
    /* Main container with wave animation */
    .edit-container {
        max-width: 850px;
        margin: 50px auto;
        padding: 0 25px;
        perspective: 1000px;
        animation: containerEntrance 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        opacity: 0;
        transform: translateY(50px);
    }
    
    @keyframes containerEntrance {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Card with wave border effect */
    .edit-card {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(12px);
        border-radius: 30px;
        padding: 50px;
        position: relative;
        overflow: hidden;
        animation: cardEntrance 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
                   cardWave 8s ease-in-out infinite;
        opacity: 0;
        transform: translateY(50px) scale(0.95);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
    }
    
    @keyframes cardEntrance {
        0% {
            opacity: 0;
            transform: translateY(50px) scale(0.95);
        }
        70% {
            opacity: 0.9;
            transform: translateY(-10px) scale(1.02);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    @keyframes cardWave {
        0%, 100% {
            transform: translateY(0) scale(1);
        }
        50% {
            transform: translateY(-10px) scale(1.01);
        }
    }
    
    /* Wave border effect */
    .edit-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 30px;
        background: linear-gradient(90deg, 
            transparent, 
            rgba(100, 200, 255, 0.2), 
            transparent,
            rgba(100, 200, 255, 0.2),
            transparent);
        background-size: 300% 100%;
        animation: waveBorder 4s linear infinite;
        z-index: -1;
        border: 2px solid transparent;
    }
    
    @keyframes waveBorder {
        0% {
            background-position: 0% 0%;
        }
        100% {
            background-position: 300% 0%;
        }
    }
    
    .quiz-title {
        color: white;
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 35px;
        text-align: center;
        position: relative;
        padding-bottom: 20px;
        animation: titleGlow 2.5s ease-in-out infinite alternate;
    }
    
    .quiz-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 150px;
        height: 4px;
        background: linear-gradient(90deg, #4cc9f0, #4361ee, #3a0ca3);
        border-radius: 2px;
        animation: lineGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes titleGlow {
        from {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        to {
            text-shadow: 0 0 20px rgba(255, 255, 255, 1), 
                         0 0 30px rgba(76, 201, 240, 0.8);
        }
    }
    
    @keyframes lineGlow {
        from {
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        to {
            box-shadow: 0 0 15px rgba(255, 255, 255, 1);
        }
    }
    
    /* Form styling with floating labels */
    .form-group {
        margin-bottom: 30px;
        opacity: 0;
        animation: fieldFadeIn 0.7s ease-out forwards;
        position: relative;
    }
    
    .form-group:nth-child(1) { animation-delay: 0.4s; }
    .form-group:nth-child(2) { animation-delay: 0.5s; }
    .form-group:nth-child(3) { animation-delay: 0.6s; }
    .form-group:nth-child(4) { animation-delay: 0.7s; }
    .form-group:nth-child(5) { animation-delay: 0.8s; }
    .form-group:nth-child(6) { animation-delay: 0.9s; }
    .form-group:nth-child(7) { animation-delay: 1.0s; }
    
    @keyframes fieldFadeIn {
        0% {
            transform: translateY(25px) translateX(-15px);
            opacity: 0;
        }
        70% {
            transform: translateY(-8px) translateX(0);
        }
        100% {
            transform: translateY(0) translateX(0);
            opacity: 1;
        }
    }
    
    .form-group label {
        display: block;
        margin-bottom: 12px;
        color: #101010;
        font-weight: 600;
        font-size: 1.1rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        position: relative;
        padding-left: 30px;
        animation: labelPulse 3s infinite;
    }
    
    .form-group label::before {
        content: '‚ú¶';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        color: #4cc9f0;
        font-size: 1.2rem;
        animation: starPulse 2s infinite;
    }
    
    @keyframes labelPulse {
        0%, 100% {
            transform: translateX(0);
        }
        50% {
            transform: translateX(5px);
        }
    }
    
    @keyframes starPulse {
        0%, 100% {
            transform: translateY(-50%) scale(1);
            opacity: 0.8;
        }
        50% {
            transform: translateY(-50%) scale(1.3);
            opacity: 1;
        }
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
        width: 100%;
        padding: 18px 25px;
        border: 2px solid transparent;
        border-radius: 18px;
        background: rgba(255, 255, 255, 0.95);
        font-size: 1.1rem;
        transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        color: #333;
        position: relative;
    }
    
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
        outline: none;
        border-color: #4361ee;
        background: white;
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(67, 97, 238, 0.4);
        animation: inputFocus 0.4s ease;
    }
    
    @keyframes inputFocus {
        0% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-8px);
        }
        100% {
            transform: translateY(-5px);
        }
    }
    
    .form-group textarea {
        min-height: 140px;
        resize: vertical;
    }
    
    /* Input hover effects */
    .form-group input:hover,
    .form-group textarea:hover,
    .form-group select:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    
    /* Buttons with cosmic effects */
    .btn-container {
        display: flex;
        gap: 25px;
        justify-content: center;
        margin-top: 40px;
        flex-wrap: wrap;
    }
    
    .btn {
        position: relative;
        padding: 18px 40px;
        font-size: 1.1rem;
        font-weight: 700;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 2px;
        transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        text-decoration: none;
        display: inline-block;
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        transform: translateY(0);
        animation: btnFloat 4s ease-in-out infinite;
    }
    
    @keyframes btnFloat {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-7px);
        }
    }
    
    .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, 
            transparent, 
            rgba(255, 255, 255, 0.4), 
            transparent);
        background-size: 200% 100%;
        animation: btnShine 3s infinite;
        opacity: 0;
    }
    
    .btn:hover::before {
        opacity: 1;
        animation: btnShine 1.5s infinite;
    }
    
    @keyframes btnShine {
        0% {
            background-position: -100% 0;
        }
        100% {
            background-position: 100% 0;
        }
    }
    
    .btn:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 35px rgba(0, 0, 0, 0.4);
        animation: none;
    }
    
    .btn:active {
        transform: translateY(-3px);
    }
    
    .btn-save {
        background: linear-gradient(135deg, #00b4d8 0%, #0077b6 100%);
        color: white;
        animation: btnReveal 1s ease-out 1.2s both, 
                   btnPulse 3s ease-in-out infinite alternate;
    }
    
    .btn-save:hover {
        box-shadow: 0 20px 40px rgba(0, 180, 216, 0.5);
    }
    
    .btn-back {
        background: linear-gradient(135deg, #7209b7 0%, #3a0ca3 100%);
        color: white;
        animation: btnReveal 1s ease-out 1.3s both, 
                   btnPulse 3s ease-in-out infinite alternate 0.5s;
    }
    
    .btn-back:hover {
        box-shadow: 0 20px 40px rgba(114, 9, 183, 0.5);
    }
    
    @keyframes btnReveal {
        0% {
            transform: translateY(40px) scale(0.8);
            opacity: 0;
        }
        70% {
            transform: translateY(-15px) scale(1.05);
        }
        100% {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
    }
    
    @keyframes btnPulse {
        0% {
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        }
        100% {
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4),
                        0 0 25px rgba(255, 255, 255, 0.3);
        }
    }
    
    /* Alert styling with animation */
    .alert {
        background: rgba(255, 107, 107, 0.25);
        border: 1px solid rgba(255, 107, 107, 0.6);
        border-radius: 18px;
        padding: 25px;
        margin-bottom: 30px;
        color: #ff6b6b;
        font-weight: 600;
        backdrop-filter: blur(10px);
        animation: alertSlide 0.6s ease-out, alertPulse 2s infinite;
    }
    
    @keyframes alertSlide {
        from {
            transform: translateY(-25px) scale(0.95);
            opacity: 0;
        }
        to {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
    }
    
    @keyframes alertPulse {
        0%, 100% {
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
        }
        50% {
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
        .edit-container {
            padding: 0 20px;
        }
        
        .edit-card {
            padding: 35px 25px;
        }
        
        h2 {
            font-size: 2.2rem;
        }
        
        .quiz-title {
            font-size: 1.7rem;
        }
        
        .btn-container {
            flex-direction: column;
            gap: 20px;
        }
        
        .btn {
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Animated background -->
<div class="animated-bg"></div>
<!-- Floating bubbles -->
<div class="bubble" style="width: 80px; height: 80px; top: 15%; left: 10%; animation-delay: 0s;"></div>
<div class="bubble" style="width: 60px; height: 60px; top: 75%; right: 15%; animation-delay: 2s;"></div>
<div class="bubble" style="width: 100px; height: 100px; bottom: 25%; left: 20%; animation-delay: 4s;"></div>
<div class="bubble" style="width: 70px; height: 70px; top: 45%; right: 10%; animation-delay: 1s;"></div>
<div class="bubble" style="width: 50px; height: 50px; bottom: 35%; right: 25%; animation-delay: 3s;"></div>

<h2 style="color:rgba(0, 0, 0, 0.764);">‚úèÔ∏è Edit Question</h2>

<div class="edit-container">
    <div class="edit-card">
        <h3 style="color: rgba(0, 0, 0, 0.764);" class="quiz-title">{{ question.quiz.title }}</h3>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label> Question Text:</label>
                {{ form.question_text }}
            </div>
            
            <div class="form-group">
                <label> Option A:</label>
                {{ form.option_a }}
            </div>
            
            <div class="form-group">
                <label> Option B:</label>
                {{ form.option_b }}
            </div>
            
            <div class="form-group">
                <label>Option C:</label>
                {{ form.option_c }}
            </div>
            
            <div class="form-group">
                <label> Option D:</label>
                {{ form.option_d }}
            </div>
            
            <div class="form-group">
                <label> Correct Answer:</label>
                {{ form.correct_answer }}
            </div>
            
            <div class="form-group">
                <label> Marks:</label>
                {{ form.marks }}
            </div>
            
            <div class="form-group">
                <label> Order:</label>
                {{ form.order }}
            </div>
            
            {% if form.errors %}
            <div class="alert">
                {{ form.errors }}
            </div>
            {% endif %}
            
            <div class="btn-container">
                <button type="submit" class="btn btn-save">üíæ Save Changes</button>
                <a href="{% url 'add_questions' question.quiz.id %}" class="btn btn-back">‚Üê Back to Questions</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Create floating bubbles with random properties
function createFloatingBubbles() {
    const bubbleCount = 12;
    
    for (let i = 0; i < bubbleCount; i++) {
        const bubble = document.createElement('div');
        bubble.classList.add('bubble');
        
        // Random properties
        const size = Math.random() * 100 + 30;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        const duration = Math.random() * 25 + 15;
        const delay = Math.random() * 8;
        const hue = Math.random() * 360;
        
        bubble.style.width = size + 'px';
        bubble.style.height = size + 'px';
        bubble.style.left = posX + '%';
        bubble.style.top = posY + '%';
        bubble.style.animationDuration = duration + 's';
        bubble.style.animationDelay = delay + 's';
        bubble.style.background = `radial-gradient(circle, hsla(${hue}, 80%, 70%, 0.2) 0%, transparent 70%)`;
        
        document.body.appendChild(bubble);
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    // Create additional bubbles
    createFloatingBubbles();
});
</script>
{% endblock %}